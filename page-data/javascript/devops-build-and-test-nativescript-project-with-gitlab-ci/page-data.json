{"componentChunkName":"component---src-templates-blog-post-js","path":"/javascript/devops-build-and-test-nativescript-project-with-gitlab-ci/","result":{"data":{"site":{"siteMetadata":{"title":"Labidi Aymen"}},"markdownRemark":{"id":"22050827-6a11-5cea-9aac-f16e97b048cf","excerpt":"To get more things Done we need more time, and to get more time there are things you must do, one of them is the automation. Did you hear about DevOps? Yeah, me…","html":"<p>To get more things <em><strong>Done</strong></em> we need more <em><strong>time</strong></em>, and to get more time there are things you <strong>must</strong> do, one of them is the <strong>automation</strong>.</p>\n<p>Did you hear about <em><strong>DevOps</strong></em>? Yeah, me too, here's what <strong>Amazon</strong> says about :</p>\n<p><strong><em>DevOps is the combination of cultural philosophies, practices, and tools that increase an organization’s ability to deliver applications and services at high velocity</em></strong></p>\n<p>When I start coding in a new project the first thing I do is to prepare the git <strong>repository</strong>, there are many services allow you to host your repositories int they servers, the Famous one is <strong><a href=\"https://github.com/\">Github</a></strong> but you need a membership to host <strong>private</strong> repositories, like all developers I start looking for an Alternatives until I found <a href=\"https://about.gitlab.com/\">Gitlab</a> , There's an open source version (Community) and  I installed on my oven server but It took all of the <strong>memory</strong> that I have, so I stick with the hosting they provide.</p>\n<p>Everything seems Ok until start working with <strong>NativeScript</strong> and <strong>Angular</strong> to build <strong>mobile</strong> Apps, in the <strong>DEV</strong> world there's always more than environment, at least we have a development environment and production environment when you are in dev environment, you can't know how your code or the plugin that you've just installed <strong>gonna behave</strong> or will it work in prod environment.</p>\n<p>Here there are two main <strong>roads</strong>, build the application each time I add a NativeScript plugin or code for days then build the App and I found out if everything seems Ok, If not,  you maybe need to change some plugins and rewrite a <strong>bunch of lines</strong> of code.</p>\n<p><em><strong>The solution?</strong></em></p>\n<p>While browsing the web I found some services contain a CI into they names, like <a href=\"https://circleci.com/\">CircleCI</a> , <a href=\"https://travis-ci.org/\">Travis CI</a> , and others, I got curious until I got deep into the subject, And found out that these are tools for <em><strong>Continuous Integration</strong></em> and delivery.</p>\n<p><strong><em>How does it work?</em></strong></p>\n<p>To Deliver a good product you need to do your <strong>test</strong> the app, by writing the unit tests or/and real humans <strong>interaction</strong>, you need to run your unit tests each time you add code to find out if you or somebody else broke the app.</p>\n<p>Ok, but running tests and building each time in <strong>your machine</strong> will reduce the <strong>performance</strong> of your development environment, and for sure will make your nervous, How about building in somebody else machine? that's when I start looking for alternatives solutions, in the meanwhile <strong>Gitlab</strong> introduce the Continuous Integration <strong>feature</strong>, and it's for <strong>FREE</strong>.</p>\n<p>Now when I (or anyone else in the same repository ) push a commit, Gitlab will run the test, build and generate an APK file (for Android) for me and show me If there are issues white building.</p>\n<p>I will share with you how I've Done it.</p>\n<p>You can achieve this <strong>workflow</strong> by adding .gitlab-ci.yml</p>\n<p><div id=\"gist89554558\" class=\"gist\">\n    <div class=\"gist-file\" translate=\"no\">\n      <div class=\"gist-data\">\n        <div class=\"js-gist-file-update-container js-task-list-container file-box\">\n  <div id=\"file-gitlab-ci-yml\" class=\"file my-2\">\n    \n    <div itemprop=\"text\" class=\"Box-body p-0 blob-wrapper data type-yaml  \">\n\n        \n<div class=\"js-check-bidi js-blob-code-container blob-code-content\">\n\n  <template class=\"js-file-alert-template\">\n  <div data-view-component=\"true\" class=\"flash flash-warn flash-full d-flex flex-items-center\">\n  <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path fill-rule=\"evenodd\" d=\"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z\"></path>\n</svg>\n  \n    <span>\n      This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.\n      <a href=\"https://github.co/hiddenchars\" target=\"_blank\">Learn more about bidirectional Unicode characters</a>\n    </span>\n\n\n  <div data-view-component=\"true\" class=\"flash-action\">      <a href=\"{{ revealButtonHref }}\" data-view-component=\"true\" class=\"btn-sm btn\">  Show hidden characters\n  \n</a>\n</div>\n</div></template>\n<template class=\"js-line-alert-template\">\n  <span aria-label=\"This line has hidden Unicode characters\" data-view-component=\"true\" class=\"line-alert tooltipped tooltipped-e\">\n    <svg aria-hidden=\"true\" height=\"16\" viewBox=\"0 0 16 16\" version=\"1.1\" width=\"16\" data-view-component=\"true\" class=\"octicon octicon-alert\">\n    <path fill-rule=\"evenodd\" d=\"M8.22 1.754a.25.25 0 00-.44 0L1.698 13.132a.25.25 0 00.22.368h12.164a.25.25 0 00.22-.368L8.22 1.754zm-1.763-.707c.659-1.234 2.427-1.234 3.086 0l6.082 11.378A1.75 1.75 0 0114.082 15H1.918a1.75 1.75 0 01-1.543-2.575L6.457 1.047zM9 11a1 1 0 11-2 0 1 1 0 012 0zm-.25-5.25a.75.75 0 00-1.5 0v2.5a.75.75 0 001.5 0v-2.5z\"></path>\n</svg>\n</span></template>\n\n  <table class=\"highlight tab-size js-file-line-container js-code-nav-container js-tagsearch-file\" data-tab-size=\"8\" data-paste-markdown-skip data-tagsearch-lang=\"YAML\" data-tagsearch-path=\".gitlab-ci.yml\">\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L1\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"1\"></td>\n          <td id=\"file-gitlab-ci-yml-LC1\" class=\"blob-code blob-code-inner js-file-line\"><span class=\"pl-ent\">build_job</span>:</td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L2\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"2\"></td>\n          <td id=\"file-gitlab-ci-yml-LC2\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-ent\">image</span>: <span class=\"pl-s\">runmymind/docker-android-sdk:ubuntu-standalone</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L3\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"3\"></td>\n          <td id=\"file-gitlab-ci-yml-LC3\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-ent\">variables</span>:</td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L4\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"4\"></td>\n          <td id=\"file-gitlab-ci-yml-LC4\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-ent\">NODE_VERSION</span>: <span class=\"pl-s\">8.9.4</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L5\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"5\"></td>\n          <td id=\"file-gitlab-ci-yml-LC5\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-ent\">stage</span>: <span class=\"pl-s\">build</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L6\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"6\"></td>\n          <td id=\"file-gitlab-ci-yml-LC6\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-ent\">only</span>:</td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L7\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"7\"></td>\n          <td id=\"file-gitlab-ci-yml-LC7\" class=\"blob-code blob-code-inner js-file-line\">    - <span class=\"pl-s\">master</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L8\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"8\"></td>\n          <td id=\"file-gitlab-ci-yml-LC8\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-ent\">script</span>: </td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L9\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"9\"></td>\n          <td id=\"file-gitlab-ci-yml-LC9\" class=\"blob-code blob-code-inner js-file-line\">    - <span class=\"pl-s\">git submodule update --init --recursive</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L10\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"10\"></td>\n          <td id=\"file-gitlab-ci-yml-LC10\" class=\"blob-code blob-code-inner js-file-line\">    - <span class=\"pl-s\">wget -q http://nodejs.org/dist/v${NODE_VERSION}/node-v${NODE_VERSION}-linux-x64.tar.gz</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L11\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"11\"></td>\n          <td id=\"file-gitlab-ci-yml-LC11\" class=\"blob-code blob-code-inner js-file-line\">    - <span class=\"pl-s\">tar -xzf node-v${NODE_VERSION}-linux-x64.tar.gz</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L12\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"12\"></td>\n          <td id=\"file-gitlab-ci-yml-LC12\" class=\"blob-code blob-code-inner js-file-line\">    - <span class=\"pl-s\">mv node-v${NODE_VERSION}-linux-x64 /opt/node</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L13\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"13\"></td>\n          <td id=\"file-gitlab-ci-yml-LC13\" class=\"blob-code blob-code-inner js-file-line\">    - <span class=\"pl-s\">rm node-v${NODE_VERSION}-linux-x64.tar.gz</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L14\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"14\"></td>\n          <td id=\"file-gitlab-ci-yml-LC14\" class=\"blob-code blob-code-inner js-file-line\">    - <span class=\"pl-s\">PATH=${PATH}:/opt/node/bin</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L15\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"15\"></td>\n          <td id=\"file-gitlab-ci-yml-LC15\" class=\"blob-code blob-code-inner js-file-line\">    - <span class=\"pl-s\">npm install -g nativescript --unsafe-perm</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L16\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"16\"></td>\n          <td id=\"file-gitlab-ci-yml-LC16\" class=\"blob-code blob-code-inner js-file-line\">    - <span class=\"pl-s\">npm install nativescript --unsafe-perm</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L17\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"17\"></td>\n          <td id=\"file-gitlab-ci-yml-LC17\" class=\"blob-code blob-code-inner js-file-line\">    - <span class=\"pl-s\">$ANDROID_HOME/tools/bin/sdkmanager &quot;tools&quot; &quot;platform-tools&quot; &quot;platforms;android-26&quot; &quot;build-tools;26.0.1&quot; &quot;extras;android;m2repository&quot; &quot;extras;google;m2repository&quot; &gt; /dev/null</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L18\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"18\"></td>\n          <td id=\"file-gitlab-ci-yml-LC18\" class=\"blob-code blob-code-inner js-file-line\">    - <span class=\"pl-s\">npm i</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L19\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"19\"></td>\n          <td id=\"file-gitlab-ci-yml-LC19\" class=\"blob-code blob-code-inner js-file-line\">    - <span class=\"pl-s\">echo $ANDROID_KEY_BASE64 | base64 -d &gt; bsc-release-key.jks</span></td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L20\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"20\"></td>\n          <td id=\"file-gitlab-ci-yml-LC20\" class=\"blob-code blob-code-inner js-file-line\">    - <span class=\"pl-s\">tns build android --bundle --env.snapshot --env.aot </span></td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L21\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"21\"></td>\n          <td id=\"file-gitlab-ci-yml-LC21\" class=\"blob-code blob-code-inner js-file-line\">  <span class=\"pl-ent\">artifacts</span>:</td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L22\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"22\"></td>\n          <td id=\"file-gitlab-ci-yml-LC22\" class=\"blob-code blob-code-inner js-file-line\">    <span class=\"pl-ent\">paths</span>:</td>\n        </tr>\n        <tr>\n          <td id=\"file-gitlab-ci-yml-L23\" class=\"blob-num js-line-number js-code-nav-line-number js-blob-rnum\" data-line-number=\"23\"></td>\n          <td id=\"file-gitlab-ci-yml-LC23\" class=\"blob-code blob-code-inner js-file-line\">      - <span class=\"pl-s\">platforms/android/app/build/outputs/apk/</span></td>\n        </tr>\n  </table>\n</div>\n\n\n    </div>\n\n  </div>\n</div>\n\n      </div>\n      <div class=\"gist-meta\">\n        <a href=\"https://gist.github.com/labidiaymen/27f0e2dd6f2de278ca68c550d89c78fb/raw/33baa33b81ec876a6b99df003f286b0863b710ea/.gitlab-ci.yml\" style=\"float:right\">view raw</a>\n        <a href=\"https://gist.github.com/labidiaymen/27f0e2dd6f2de278ca68c550d89c78fb#file-gitlab-ci-yml\">\n          .gitlab-ci.yml\n        </a>\n        hosted with &#10084; by <a href=\"https://github.com\">GitHub</a>\n      </div>\n    </div>\n</div></p>\n<p>Let's break this file down.</p>\n<p>First, we created a <strong>Job</strong>, then we pull a <a href=\"https://www.docker.com/\">Docker</a> image that contains a fresh Installed version of <strong>Android</strong>.</p>\n<p>Then we installed the <strong>Node.js</strong>, after that, we installed NativeScript, updating the Android SDK and installing Node modules with <strong>NPM</strong>.</p>\n<p>When everything is done, we build the App with NativeScript CLI (command line tools).</p>\n<p>In the build process of NativeScript we pass by the unit tests, if there's an error it will be thrown with an Exception.</p>\n<p>If there's no error and everything is fine we will get our APK available to download, This all happens while you're writing your code in peace, you didn't stress your machine but you got visibilities about what's gonna happen when you build for production.</p>\n<p><strong>Isn't a big deal? how do you think?</strong></p>","frontmatter":{"title":"[DevOps] Build and Test  Nativescript Project with Gitlab-CI","date":"May 19, 2018","description":null,"categories":["javascript","devops"],"cover":"../images/devops-gitlab-ci-nativescript-aymen.co_-2.png"}},"previous":{"fields":{"slug":"/redux-ngrx-vuex-the-one-state-ideology/"},"frontmatter":{"title":"[Redux, NGRX, VUEX] The one State ideology"}},"next":{"fields":{"slug":"/node-js-v10-what-you-need-to-know/"},"frontmatter":{"title":"Node.js v10 What you need to know"}}},"pageContext":{"id":"22050827-6a11-5cea-9aac-f16e97b048cf","previousPostId":"0464473a-7b67-549a-a876-9e196dd0583a","nextPostId":"bfa18bf1-33be-53b6-abad-bcf222ef7ff6","category":"javascript"}},"staticQueryHashes":["2841359383"]}